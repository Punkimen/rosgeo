const path=require("path"),webpack=require("webpack"),merge=require("webpack-merge"),UglifyJSPlugin=require("uglifyjs-webpack-plugin"),baseConfig=require("./webpack.base"),joinRoot=path.join.bind(path,__dirname,"..");module.exports=merge(baseConfig,{mode:"production",entry:[joinRoot("demo/scripts/index.ts")],output:{path:joinRoot("ghpages"),filename:"app.js",publicPath:"/"},module:{rules:[{test:/\.css$/,use:["style-loader","css-loader"]},{test:/\.styl$/,use:["style-loader","css-loader",{loader:"postcss-loader",options:{sourceMap:!1,plugins:()=>[require("autoprefixer")]}},"stylus-loader"],include:[joinRoot("demo")]}]},plugins:[new UglifyJSPlugin,new webpack.optimize.ModuleConcatenationPlugin]});